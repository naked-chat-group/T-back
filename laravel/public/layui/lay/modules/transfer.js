layui.define(["laytpl","form"],function(t){var h=layui.$,e=layui.laytpl,d=layui.form,l="transfer",i={config:{},index:layui[l]?(layui[l].index+10000):0,set:function(u){var v=this;v.config=h.extend({},v.config,u);return v},on:function(u,v){return layui.onevent.call(this,l,u,v)}},c=function(){var v=this,u=v.config,w=u.id||v.index;c.that[w]=v;c.config[w]=u;return{config:u,reload:function(x){v.reload.call(v,x)},getData:function(){return v.getData.call(v)}}},s=function(v){var u=c.config[v];if(!u){hint.error("The ID option was not found in the "+l+" instance")}return u||null},g="layui-transfer",p="layui-hide",q="layui-btn-disabled",k="layui-none",b="layui-transfer-box",a="layui-transfer-header",f="layui-transfer-search",m="layui-transfer-active",j="layui-transfer-data",r=function(u){u=u||{};return['<div class="layui-transfer-box" data-index="'+u.index+'">','<div class="layui-transfer-header">','<input type="checkbox" name="'+u.checkAllName+'" lay-filter="layTransferCheckbox" lay-type="all" lay-skin="primary" title="{{ d.data.title['+u.index+"] || 'list"+(u.index+1)+"' }}\">","</div>","{{# if(d.data.showSearch){ }}",'<div class="layui-transfer-search">','<i class="layui-icon layui-icon-search"></i>','<input type="input" class="layui-input" placeholder="关键词搜索">',"</div>","{{# } }}",'<ul class="layui-transfer-data"></ul>',"</div>"].join("")},n=['<div class="layui-transfer layui-form layui-border-box" lay-filter="LAY-transfer-{{ d.index }}">',r({index:0,checkAllName:"layTransferLeftCheckAll"}),'<div class="layui-transfer-active">','<button type="button" class="layui-btn layui-btn-sm layui-btn-primary layui-btn-disabled" data-index="0">','<i class="layui-icon layui-icon-next"></i>',"</button>",'<button type="button" class="layui-btn layui-btn-sm layui-btn-primary layui-btn-disabled" data-index="1">','<i class="layui-icon layui-icon-prev"></i>',"</button>","</div>",r({index:1,checkAllName:"layTransferRightCheckAll"}),"</div>"].join(""),o=function(u){var v=this;v.index=++i.index;v.config=h.extend({},v.config,i.config,u);v.render()};o.prototype.config={title:["列表一","列表二"],width:200,height:360,data:[],value:[],showSearch:false,id:"",text:{none:"无数据",searchNone:"无匹配数据"}};o.prototype.reload=function(u){var v=this;layui.each(u,function(w,x){if(x.constructor===Array){delete v.config[w]}});v.config=h.extend(true,{},v.config,u);v.render()};o.prototype.render=function(){var w=this,u=w.config;var v=w.elem=h(e(n).render({data:u,index:w.index}));var x=u.elem=h(u.elem);if(!x[0]){return}u.data=u.data||[];u.value=u.value||[];w.key=u.id||w.index;x.html(w.elem);w.layBox=w.elem.find("."+b);w.layHeader=w.elem.find("."+a);w.laySearch=w.elem.find("."+f);w.layData=v.find("."+j);w.layBtn=v.find("."+m+" .layui-btn");w.layBox.css({width:u.width,height:u.height});w.layData.css({height:function(){return u.height-w.layHeader.outerHeight()-w.laySearch.outerHeight()-2}()});w.renderData();w.events()};o.prototype.renderData=function(){var w=this,v=w.config;var u=[{checkName:"layTransferLeftCheck",views:[]},{checkName:"layTransferRightCheck",views:[]}];w.parseData(function(y){var z=y.selected?1:0,x=["<li>",'<input type="checkbox" name="'+u[z].checkName+'" lay-skin="primary" lay-filter="layTransferCheckbox" title="'+y.title+'"'+(y.disabled?" disabled":"")+(y.checked?" checked":"")+' value="'+y.value+'">',"</li>"].join("");u[z].views.push(x);delete y.selected});w.layData.eq(0).html(u[0].views.join(""));w.layData.eq(1).html(u[1].views.join(""));w.renderCheckBtn()};o.prototype.renderForm=function(u){d.render(u,"LAY-transfer-"+this.index)};o.prototype.renderCheckBtn=function(w){var v=this,u=v.config;w=w||{};v.layBox.each(function(E){var B=h(this),x=B.find("."+j),D=B.find("."+a).find('input[type="checkbox"]'),z=x.find('input[type="checkbox"]');var C=0,y=false;z.each(function(){var F=h(this).data("hide");if(this.checked||this.disabled||F){C++}if(this.checked&&!F){y=true}});D.prop("checked",y&&C===z.length);v.layBtn.eq(E)[y?"removeClass":"addClass"](q);if(!w.stopNone){var A=x.children("li:not(."+p+")").length;v.noneView(x,A?"":u.text.none)}});v.renderForm("checkbox")};o.prototype.noneView=function(u,w){var v=h('<p class="layui-none">'+(w||"")+"</p>");if(u.find("."+k)[0]){u.find("."+k).remove()}w.replace(/\s/g,"")&&u.append(v)};o.prototype.setValue=function(){var w=this,v=w.config,u=[];w.layBox.eq(1).find("."+j+' input[type="checkbox"]').each(function(){var x=h(this).data("hide");x||u.push(this.value)});v.value=u;return w};o.prototype.parseData=function(x){var w=this,u=w.config,v=[];layui.each(u.data,function(y,z){z=(typeof u.parseData==="function"?u.parseData(z):z)||z;v.push(z=h.extend({},z));layui.each(u.value,function(B,A){if(A==z.value){z.selected=true}});x&&x(z)});u.data=v;return w};o.prototype.getData=function(w){var v=this,u=v.config,x=[];layui.each(w||u.value,function(y,z){layui.each(u.data,function(B,A){delete A.selected;if(z==A.value){x.push(A)}})});return x};o.prototype.events=function(){var v=this,u=v.config;v.elem.on("click",'input[lay-filter="layTransferCheckbox"]+',function(){var x=h(this).prev(),y=x[0].checked,w=x.parents("."+b).eq(0).find("."+j);
if(x[0].disabled){return}if(x.attr("lay-type")==="all"){w.find('input[type="checkbox"]').each(function(){if(this.disabled){return}this.checked=y})}v.renderCheckBtn({stopNone:true})});v.layBtn.on("click",function(){var z=h(this),A=z.data("index"),x=v.layBox.eq(A),w=[];if(z.hasClass(q)){return}v.layBox.eq(A).each(function(D){var C=h(this),B=C.find("."+j);B.children("li").each(function(){var G=h(this),E=G.find('input[type="checkbox"]'),F=E.data("hide");if(E[0].checked&&!F){E[0].checked=false;x.siblings("."+b).find("."+j).append(G.clone());G.remove();w.push(E[0].value)}v.setValue()})});v.renderCheckBtn();var y=x.siblings("."+b).find("."+f+" input");y.val()===""||y.trigger("keyup");u.onchange&&u.onchange(v.getData(w),A)});v.laySearch.find("input").on("keyup",function(){var z=this.value,w=h(this).parents("."+f).eq(0).siblings("."+j),x=w.children("li");x.each(function(){var C=h(this),A=C.find('input[type="checkbox"]'),B=A[0].title.indexOf(z)!==-1;C[B?"removeClass":"addClass"](p);A.data("hide",B?false:true)});v.renderCheckBtn();var y=x.length===w.children("li."+p).length;v.noneView(w,y?u.text.searchNone:"")})};c.that={};c.config={};i.reload=function(w,u){var v=c.that[w];v.reload(u);return c.call(v)};i.getData=function(v){var u=c.that[v];return u.getData()};i.render=function(u){var v=new o(u);return c.call(v)};t(l,i)});